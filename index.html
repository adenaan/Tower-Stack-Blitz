
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      overflow: hidden;
      background: #000;
      touch-action: manipulation;
    }
    canvas {
      display: block;
      background: #000;
    }
  </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let blocks = [];
let blockWidth = 100;
let blockHeight = 30;
let currentX = 0;
let direction = 2;
let cameraOffsetY = 0;
let targetOffsetY = 0;
let score = 0;
let gameStarted = false;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

function drawBlock(x, y, width) {
  ctx.fillStyle = "#fff";
  ctx.fillRect(x, y, width, blockHeight);
}

function drawBackground() {
  let skyHeight = 3000;
  ctx.fillStyle = "#87CEEB";
  ctx.fillRect(0, canvas.height - skyHeight - cameraOffsetY, canvas.width, skyHeight);
}

function update() {
  if (!gameStarted) return;

  currentX += direction;
  if (currentX + blockWidth > canvas.width || currentX < 0) direction *= -1;

  // Smooth camera follow
  let topY = (blocks.length + 1) * blockHeight;
  if (topY > canvas.height / 2) {
    targetOffsetY = topY - canvas.height / 2;
  } else {
    targetOffsetY = 0;
  }
  cameraOffsetY += (targetOffsetY - cameraOffsetY) * 0.1;
}

function render() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBackground();

  // Draw stack
  for (let i = 0; i < blocks.length; i++) {
    let worldY = (i + 1) * blockHeight;
    let screenY = canvas.height - (worldY - cameraOffsetY);
    drawBlock(blocks[i].x, screenY, blocks[i].width);
  }

  // Draw current block
  let worldY = (blocks.length + 1) * blockHeight;
  let screenY = canvas.height - (worldY - cameraOffsetY);
  drawBlock(currentX, screenY, blockWidth);

  // Draw score
  ctx.fillStyle = "#000";
  ctx.font = "24px Arial";
  ctx.fillText("Score: " + score, 10, 30);
}

function gameLoop() {
  update();
  render();
  requestAnimationFrame(gameLoop);
}
gameLoop();

canvas.addEventListener("pointerdown", () => {
  if (!gameStarted) {
    gameStarted = true;
    return;
  }
  // Add block
  blocks.push({ x: currentX, width: blockWidth });
  score++;
  currentX = 0;
  direction = 2;
});
</script>
</body>
</html>
